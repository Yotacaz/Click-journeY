
<?php
//trier le tableau $voyage[] par note

	//extraire les donnees json
	//decoder mettre dans variable voyage
	//afficher nom, note, durée, description
$fichier = "DataVoyage/DataVoyage001.json";
function decodageDonnees($fichier){
	
	if(file_exists($fichier)){

        $voyages = file_get_contents($fichier);
        //decoder le fichier json
        $donnees = json_decode($voyages, true);

        //verifier si le decodage a marche
        if($donnees===null){
        	$donnees="probleme de decodage";
        }
	}
	else{ // le fichier n'existe pas
		$donnees="le fichier".$fichier." n'existe pas";
	}
	return $donnees;
}



function trierVoyage($fichier){
	$voyages= decodageDonnees($fichier);
	if(is_array($voyages)){ //decodage reussi on peut trier

		usort($voyages, function ($a, $b) 
			{
	    		return $b["note"] - $a["note"];  // Tri par note du + au -
	    	}
		);
		return $voyages;
	}
	else{     // Si ce n'est pas un tableau, afficher le message d'erreur
		echo $voyages;
		exit();
	}
}

$voyages = trierVoyage($fichier);



//boucle 5 premiers voyages
$voyages = array_splice($voyages, 0, 5);

// Parcourir les 5 premiers éléments
    echo "<h1>LES MIEUX NOTES<h1/>";

foreach ($voyages as $v) {
    echo "<h2>Voyage: " . $v['titre'] . "</h2>";
    echo "<p><strong>Note:</strong> " . $v['note'] . " / 5</p>";
    echo "<p><strong>Description:</strong> " . $v['description'] . "</p>";
    echo "<p><strong>Durée:</strong> " . $v['dates']['duree'] . " jours</p>";
    echo "<hr>";
}
        



?>
